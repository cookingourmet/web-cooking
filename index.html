<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cooking Gourmet</title>
    <link rel="stylesheet" href="css/styles.css">
    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">


    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>

    

<div class="container">
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">
      <!-- Reemplazamos el texto "Inicio" con una imagen -->
      <a class="navbar-brand" href="#">
        <img src="images/logos/logo.png" alt="Logo" style="height: 40px;">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item me-4"> <!-- Se aplica margen a la derecha de cada √≠tem -->
            <a class="nav-link" href="#">Eventos</a>
          </li>
  
          <li class="nav-item dropdown me-4"> <!-- Se aplica margen a la derecha -->
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Programas de estudio
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="carreras/gastronomia/gastronomia.html">Gastronom√≠a</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#">Pasteler√≠a</a></li>
              <li><a class="dropdown-item" href="#">Bar Profesional</a></li>
              <li><a class="dropdown-item" href="#">Barismo</a></li>
              <li><a class="dropdown-item" href="#">Sommelier</a></li>
            </ul>
          </li>
  
          <li class="nav-item me-4"> <!-- Se aplica margen a la derecha -->
            <a class="nav-link" href="https://cookingourmet.q10.com/">Aula Virtual</a>
          </li>
  
          <li class="nav-item dropdown me-4"> <!-- Se aplica margen a la derecha -->
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Estudiantes
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Ruta Gastron√≥mica</a></li>
              <li><a class="dropdown-item" href="#">Blog</a></li>
            </ul>
          </li>

          <li class="nav-item me-4"> <!-- Se aplica margen a la derecha -->
            <a class="nav-link" style="background-color: rgb(248, 6, 58); color: #fff; border-radius: 5px;" href="https://cookingourmet.q10.com/Preinscripcion">INSCRIPCI√ìN VIRTUAL</a>
          </li>

          <li class="nav-item me-4"> <!-- Se aplica margen a la derecha -->
            <a class="nav-link" style="background-color: rgb(248, 6, 58); color: #fff; border-radius: 5px;" href="https://cookingourmet.q10.com/OfertaLaboral/Crear">BOLSA DE TRABAJO</a>
          </li>


        </ul>
        <form class="d-flex" role="search">
          <button class="btn" style="background-color: rgb(248, 6, 58); color: #fff;" type="submit">Buscar</button>
        </form>
      </div>
    </div>
  </nav>
  


</div>

<div class="section1">
  <div class="featured-image">
    <img src="images/portada.png" alt="Descripci√≥n de la imagen">
    <div class="overlay">
        <h1>¬°AQUI FORMAMOS TU FUTURO!</h1>
        <p>Inicio: 18 de Agosto</p>
    </div>
    
</div>

<div class="floating-form">
  <form action="https://formsubmit.co/admin@cookingourmet.edu.pe" method="POST">
    <h5 class="form-toggle">Escribenos Aqui ‚Üí</h5> <!-- A√±adimos clase para el toggle -->
    <div class="form-content">
      <div class="mb-3">
        <label for="name" class="form-label">Nombre</label>
        <input type="text" class="form-control" id="name" placeholder="Tu nombre" name="nombre">
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Correo</label>
        <input type="email" class="form-control" id="email" placeholder="Tu correo" name="correo">
      </div>
      <div class="mb-3">
        <label for="phone" class="form-label">Celular</label>
        <input type="phone" class="form-control" id="phone" placeholder="Tu celular" name="celular">
      </div>
      <div class="mb-3">
        <label for="programa" class="form-label">Programa de Estudio</label>
        <select class="form-control" id="programa" name="programa" required>
          <option selected disabled>Seleccione un programa</option>
          <option value="Gastronom√≠a">Gastronom√≠a</option>
          <option value="Pasteler√≠a y Panader√≠a">Pasteler√≠a y Panader√≠a</option>
          <option value="Bar Profesional">Bar Profesional</option>
          <option value="Sommelier Profesional">Sommelier Profesional</option>
          <option value="Barismo Profesional">Barismo Profesional</option>
          <option value="Cocina Acelerada">Cocina Acelerada</option>
          <option value="Curso personalizado">Curso personalizado</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="message" class="form-label">Mensaje</label>
        <textarea class="form-control" id="message" rows="3" placeholder="Escribe tu mensaje" name="mensaje"></textarea>
      </div>
      <button type="submit" class="btn btn-danger w-100">Enviar</button>

      <input type="hidden" name="_next" value="https://www.cookingourmet.edu.pe/">

    </div>
  </form>
</div>
</div>



<a href="https://wa.me/51981377382" target="_blank" class="whatsapp-button">
  <i class="bi bi-whatsapp"></i>
</a>


<!-- Bot√≥n flotante -->
 <div id="chat-toggle" class="chat-toggle">
        üí¨<span id="chat-alert" class="chat-alert">!</span>
    </div>

    <div id="chat-box" class="chat-box" style="display: none;">
        <div class="chat-header">Asistente Virtual - Cookito</div>
        <div class="chat-body" id="chat-body"></div>
        <div class="chat-footer">
            <div id="chat-options" class="chat-options"></div>
            <input type="text" id="user-input" placeholder="Escribe tu mensaje...">
            <button id="send-button">Enviar</button>
        </div>
    </div>

    <form id="cuquito-form" action="https://formsubmit.co/ventas@cookingourmet.edu.pe" method="POST" style="display:none;">
        <input type="text" name="Nombre">
        <input type="email" name="Correo">
        <input type="text" name="Celular">
        <input type="text" name="Programa de Estudio">
        <input type="text" name="Mensaje">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_next" value="https://www.cookingourmet.edu.pe/">
    </form>




<div class="section2">
  <div class="text-container">
      <p class="main-text">"√öNICA ESCUELA GASTRON√ìMICA EN TODA LA REGI√ìN JUN√çN QUE FORMA ALUMNOS DESTACADOS."</p>
      <p class="sub-text">Cooking Gourmet, explora y expande tu potencial para convertirte en un verdadero Chef.</p>
      <p class="sub-text">Una experiencia gastron√≥mica √∫nica para aquellos que desean perfeccionar sus habilidades culinarias y alcanzar el √©xito profesional.</p>
      <div class="button-container">
          <button class="btn" data-modal="modal1">Sedes</button>
          <button class="btn" data-modal="modal2">Infraestructura</button>
          <button class="btn" data-modal="modal3">Galardones</button>
      </div>
  </div>
</div>

<!-- Modales -->
<div id="modal1" class="modal">
  <div class="modal-content">
    <span class="close" data-close="modal1">&times;</span>
    <h2>Sedes</h2>
    <div class="image-grid">
      <div class="image-item">
        <p class="image-text">Sede Principal</p>
        <img src="images/local2.png" alt="Sede Principal">
      </div>
      <div class="image-item">
        <p class="image-text">Sede - El tambo</p>
        <img src="images/local.png" alt="Sede Alternativa">
      </div>
    </div>
  </div>
</div>

<div id="modal2" class="modal">
  <div class="modal-content">
    <span class="close" data-close="modal2">&times;</span>
    <h2>Infraestructura</h2>
    <div class="image-grid">
      <div class="image-item">
        <p class="image-text">Cocina de Alta Tecnolog√≠a</p>
        <img src="images/central.png" alt="Cocina de Alta Tecnolog√≠a">
      </div>
      <div class="image-item">
        <p class="image-text">Sal√≥n de Clases Moderno</p>
        <img src="images/central.png" alt="Sal√≥n de Clases Moderno">
      </div>
    </div>
  </div>
</div>

<div id="modal3" class="modal">
  <div class="modal-content">
    <span class="close" data-close="modal3">&times;</span>
    <h2>Galardones</h2>
    <div class="image-grid">
      <div class="image-item">
        <p class="image-text">Premio Nacional de Gastronom√≠a</p>
        <img src="images/galardon2.jpg" alt="Premio Nacional de Gastronom√≠a">
      </div>
      <div class="image-item">
        <p class="image-text">Reconocimiento Internacional</p>
        <img src="images/galardones.png" alt="Reconocimiento Internacional">
      </div>
    </div>
  </div>
</div>



<div class="section3">
  <div class="text-container">
      <h2 class="section-title">Experiencias Cooking Gourmet</h2>
      <p class="section-subtitle">Vive la experiencia de aprender de los mejores y llevar tu pasi√≥n por la gastronom√≠a al siguiente nivel.</p>
  </div>
  <div class="experience-container">
      <div class="experience-card">
          <img src="images/logos/icono1.jpg" alt="Experiencia 1">
          <h3>Experiencia Gastron√≥mica Internacional</h3>
          <p>Viaje a diferentes destinos culinarios, donde nuestros alumnos exploran nuevas tendencias y t√©cnicas gastron√≥micas.</p>
      </div>
      <div class="experience-card">
          <img src="images/logos/icono2.jpg" alt="Experiencia 2">
          <h3>Cultura Gastron√≥mica Local</h3>
          <p>Conozca y aprenda de la rica tradici√≥n culinaria peruana y sus sabores √∫nicos, trabajando directamente con chefs expertos.</p>
      </div>
      <div class="experience-card">
          <img src="images/logos/icono3.jpg" alt="Experiencia 3">
          <h3>Creaci√≥n de Platos Innovadores</h3>
          <p>Ense√±amos c√≥mo crear platos innovadores fusionando sabores tradicionales con t√©cnicas modernas.</p>
      </div>
  </div>
</div>



<div class="section4">
  <div class="text-container">
    <h2 class="section-title">Nuestros programas de estudios</h2>
    <p class="section-subtitle">Descubre nuestros programas dise√±adas para mejorar tu experiencia</p>
  </div>
  <div class="app-icons-container">
    <div class="app-icon">
      <img src="images/logos/gastronom√≠a.png" alt="App 1">
      <p class="app-name">Gastronom√≠a</p>
    </div>
    <div class="app-icon">
      <img src="images/logos/pasteler√≠a.png" alt="App 2">
      <p class="app-name">Pasteler√≠a</p>
    </div>
    <div class="app-icon">
      <img src="images/logos/bar.png" alt="App 3">
      <p class="app-name">Bar</p>
    </div>
    <div class="app-icon">
      <img src="images/logos/barismo.png" alt="App 4">
      <p class="app-name">Barismo</p>
    </div>
    <div class="app-icon">
      <img src="images/logos/cocina.png" alt="App 5">
      <p class="app-name">Cocina</p>
    </div>
    <div class="app-icon">
      <img src="images/logos/sommelier.png" alt="App 6">
      <p class="app-name">Somelier</p>
    </div>
  </div>
</div>

<footer class="section5">
  <div class="footer-container">
    <!-- Logo -->
    <div class="footer-logo">
      <img src="images/logos/logo.png" alt="Cooking Gourmet Logo">
    </div>
    <!-- Navegaci√≥n -->
    <div class="footer-nav">
      <h4>Navegaci√≥n</h4>
      <ul>
        <li><a href="#eventos">Eventos</a></li>
        <li>
          <a href="#programas">Programas de estudio</a>
          <ul class="programas-list">
            <li><span>‚Ä¢</span> <a href="#gastronomia">Gastronom√≠a</a></li>
            <li><span>‚Ä¢</span> <a href="#pasteleria">Pasteler√≠a</a></li>
            <li><span>‚Ä¢</span> <a href="#bar-profesional">Bar Profesional</a></li>
            <li><span>‚Ä¢</span> <a href="#barismo">Barismo</a></li>
            <li><span>‚Ä¢</span> <a href="#sommelier">Sommelier</a></li>
          </ul>
        </li>
        <li><a href="#aula-virtual">Aula Virtual</a></li>
        <li><a href="#estudiantes">Estudiantes</a></li>
      </ul>
    </div>
    <!-- Redes sociales -->
    <div class="footer-social">
      <h4>Redes Sociales</h4>
      <ul>
        <li><a href="#"><img src="images/logos/facebook.png" alt="Facebook"></a></li>
        <li><a href="#"><img src="images/logos/instagram.png" alt="Instagram"></a></li>
        <li><a href="#"><img src="images/logos/ws.png" alt="whatsapp"></a></li>
      </ul>
    </div>
    <!-- Libro de reclamos -->
    <div class="footer-claims">
      <h4>Libro de Reclamos</h4>
      <p>Si tienes alguna consulta o reclamo, visita nuestro <br> <a href="libro_de_reclamos/index.html">libro de reclamos</a>.</p>
      <br>
      <br>
      <br>
    </div>
  </div>
</footer>

<style>
.whatsapp-button {
  position: fixed;
  bottom: 40px;
  right: 40px;
  background-color: #25d366;
  color: white;
  font-size: 30px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  text-decoration: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  z-index: 9999;
  transition: transform 0.3s ease;
}

.whatsapp-button:hover {
  transform: scale(1.1);
  background-color: #1ebc59;
}









/* --- Chat Toggle Button --- */
.chat-toggle {
    position: fixed;
    bottom: 40px;
    left: 40px; /* Mantener a la izquierda como lo tienes */
    background: #dc3545; /* Rojo vibrante */
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex; /* Para centrar el contenido */
    align-items: center; /* Centrado vertical */
    justify-content: center; /* Centrado horizontal */
    font-size: 28px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3); /* Sombra m√°s pronunciada */
    z-index: 1000;
    transition: transform 0.3s ease-in-out; /* Transici√≥n suave para hover */
    -webkit-user-select: none; /* Evita selecci√≥n de texto */
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.chat-toggle:hover {
    transform: scale(1.1) rotate(5deg); /* Efecto m√°s din√°mico al pasar el rat√≥n */
}

/* --- Chat Alert (Notification Bubble) --- */
.chat-alert {
    position: absolute;
    top: 5px;
    right: 5px;
    background: #ffc107; /* Amarillo de Bootstrap, buena visibilidad */
    color: #343a40; /* Texto oscuro para contraste */
    width: 22px; /* Un poco m√°s grande */
    height: 22px;
    border-radius: 50%;
    font-size: 13px; /* Ajustado para que quepa bien */
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1; /* Asegura el centrado vertical del texto */
    padding: 0;
    animation: pulse 1s infinite cubic-bezier(0.4, 0, 0.6, 1); /* Animaci√≥n m√°s natural */
    border: 1px solid rgba(0, 0, 0, 0.1); /* Borde sutil */
}

@keyframes pulse {
    0% { transform: scale(0.9); opacity: 0.8; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(0.9); opacity: 0.8; }
}

/* --- Chat Box Container --- */
.chat-box {
    position: fixed;
    bottom: 110px; /* Ajustado para dar m√°s espacio entre el bot√≥n y la caja */
    left: 20px; /* Mantener a la izquierda */
    width: 320px; /* Ancho ligeramente mayor */
    max-height: 480px; /* Altura m√°xima para una mejor visualizaci√≥n en pantallas peque√±as */
    background: white;
    border-radius: 12px; /* Bordes m√°s suaves */
    display: flex;
    flex-direction: column;
    box-shadow: 0 6px 16px rgba(0,0,0,0.35); /* Sombra m√°s definida */
    z-index: 1001;
    overflow: hidden; /* Importante para el radio de borde */
    transform-origin: bottom left; /* Punto de origen para futuras animaciones de apertura */
    transition: all 0.3s ease-out; /* Transici√≥n para un posible futuro efecto de aparici√≥n */
}

/* --- Chat Header --- */
.chat-header {
    background: #dc3545; /* Rojo vibrante */
    color: white;
    padding: 12px 15px; /* Un poco m√°s de padding */
    font-weight: bold;
    font-size: 16px; /* Tama√±o de fuente ligeramente mayor */
    text-align: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Sombra sutil debajo del header */
}

/* --- Chat Body (Messages Area) --- */
.chat-body {
    padding: 15px; /* M√°s padding para los mensajes */
    flex-grow: 1;
    overflow-y: auto; /* Scroll para los mensajes */
    font-size: 14px;
    display: flex;
    flex-direction: column;
    gap: 8px; /* Espacio entre mensajes */
    background-color: #fcfcfc; /* Fondo blanco casi puro */
    /* Estilo de scrollbar m√°s limpio para navegadores basados en WebKit */
    scrollbar-width: thin;
    scrollbar-color: #dc3545 #f1f1f1;
}

.chat-body::-webkit-scrollbar {
    width: 8px;
}

.chat-body::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.chat-body::-webkit-scrollbar-thumb {
    background-color: #dc3545;
    border-radius: 10px;
    border: 2px solid #fcfcfc;
}


/* --- Chat Footer (Input and Send Button) --- */
.chat-footer {
    display: flex;
    flex-direction: column; /* Permite que las opciones y el input est√©n en l√≠neas separadas */
    padding: 10px 15px; /* Padding consistente */
    border-top: 1px solid #e0e0e0; /* Borde m√°s claro */
    background-color: #ffffff;
    gap: 10px; /* Espacio entre el input/bot√≥n y las opciones */
}

.chat-footer .input-area { /* Contenedor para input y bot√≥n de env√≠o */
    display: flex;
    width: 100%;
    gap: 5px; /* Espacio entre input y bot√≥n */
}

.chat-footer input[type="text"] {
    flex: 1;
    padding: 10px 15px;
    font-size: 14px;
    border: 1px solid #ced4da;
    border-radius: 25px; /* M√°s redondeado */
    outline: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.chat-footer input[type="text"]:focus {
    border-color: #dc3545;
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); /* Sombra de enfoque de color rojo */
}

.chat-footer button {
    padding: 10px 20px; /* M√°s padding para el bot√≥n */
    background: #dc3545; /* Rojo vibrante */
    color: white;
    border: none;
    border-radius: 25px; /* M√°s redondeado */
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.2s ease, transform 0.1s ease;
}

.chat-footer button:hover {
    background: #c82333; /* Rojo m√°s oscuro al pasar el rat√≥n */
    transform: translateY(-1px); /* Ligero levantamiento */
}

.chat-footer button:disabled {
    background-color: #e9ecef; /* Gris claro cuando est√° deshabilitado */
    color: #6c757d; /* Texto gris oscuro */
    cursor: not-allowed;
}

/* --- Message Bubbles --- */
.bot-message, .user-message {
    padding: 10px 15px; /* M√°s padding */
    margin-bottom: 8px; /* Espacio entre burbujas */
    border-radius: 18px; /* M√°s redondeado */
    max-width: 80%; /* Asegura que no ocupen todo el ancho */
    word-wrap: break-word; /* Para que el texto largo se ajuste */
    box-shadow: 0 1px 2px rgba(0,0,0,0.08); /* Sombra sutil para "profundidad" */
}

.bot-message {
    background: #e9ecef; /* Gris claro */
    color: #212529; /* Texto oscuro */
    align-self: flex-start; /* Alinear a la izquierda */
    border-bottom-left-radius: 4px; /* Peque√±o ajuste para el "pico" visual */
}

.user-message {
    background: #dc3545; /* Rojo vibrante para mensajes de usuario */
    color: white;
    align-self: flex-end; /* Alinear a la derecha */
    border-bottom-right-radius: 4px; /* Peque√±o ajuste para el "pico" visual */
}

/* --- Typing Indicator --- */
.typing-indicator {
    font-style: italic;
    color: #6c757d; /* Gris m√°s oscuro */
    animation: typingPulse 1.5s infinite steps(3, start); /* Animaci√≥n m√°s suave de puntos */
    align-self: flex-start;
    padding-left: 10px; /* Alineaci√≥n con los mensajes del bot */
}

@keyframes typingPulse {
    0%, 80%, 100% { opacity: 0.8; }
    40% { opacity: 0.3; }
}


/* --- Chat Options Container (for buttons/chips) --- */
.chat-options {
    width: 100%;
    display: none; /* Por defecto oculto, JS lo mostrar√° */
    flex-wrap: wrap; /* Envuelve los botones si no caben */
    gap: 8px; /* Espacio entre los botones */
    margin-bottom: 10px; /* Espacio por debajo de los botones */
    justify-content: flex-start; /* Alinea los botones a la izquierda */
}

.chat-option-button {
    background-color: #6c757d; /* Gris oscuro para las opciones */
    color: white;
    border: none;
    border-radius: 20px;
    padding: 8px 15px; /* M√°s padding para los botones */
    cursor: pointer;
    font-size: 13px;
    transition: background-color 0.2s ease, transform 0.1s ease;
    flex-shrink: 0; /* Evita que los botones se encojan en exceso */
    white-space: nowrap; /* Evita que el texto del bot√≥n se rompa */
    text-align: center;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.chat-option-button:hover {
    background-color: #5a6268; /* Gris m√°s oscuro al pasar el rat√≥n */
    transform: translateY(-1px); /* Ligero levantamiento */
}

.chat-option-button:active {
    transform: translateY(0); /* Vuelve a su posici√≥n original al hacer clic */
    background-color: #495057; /* Un poco m√°s oscuro para feedback de click */
}



</style>



<script>
  // Seleccionar todos los botones y modales
const buttons = document.querySelectorAll(".btn");
const modals = document.querySelectorAll(".modal");
const closeButtons = document.querySelectorAll(".close");

// Mostrar el modal al hacer clic en un bot√≥n
buttons.forEach((button) => {
    button.addEventListener("click", () => {
        const modalId = button.getAttribute("data-modal");
        const modal = document.getElementById(modalId);
        modal.style.display = "flex";
    });
});

// Cerrar el modal al hacer clic en el bot√≥n de cierre
closeButtons.forEach((close) => {
    close.addEventListener("click", () => {
        const modalId = close.getAttribute("data-close");
        const modal = document.getElementById(modalId);
        modal.style.display = "none";
    });
});

// Cerrar el modal al hacer clic fuera del contenido
window.addEventListener("click", (event) => {
    modals.forEach((modal) => {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });
});

</script>



<script>
const chatToggle = document.getElementById('chat-toggle');
const chatBox = document.getElementById('chat-box');
const chatBody = document.getElementById('chat-body');
const chatAlert = document.getElementById('chat-alert');
const userInput = document.getElementById('user-input');
const sendButton = document.getElementById('send-button');
const chatOptionsContainer = document.getElementById('chat-options');

// Objeto para encapsular la l√≥gica del chatbot
const CookitoChatbot = {
    // 'step' ahora representa el √≠ndice de la pregunta ACTUAL que Cookito va a hacer
    // o que ya ha hecho y el usuario debe responder.
    step: 0,
    formData: {},
    isTyping: false, // Controla si Cookito est√° "escribiendo"

    // Definici√≥n del flujo de la conversaci√≥n con preguntas, respuestas y OPCIONES
    chatFlow: [
        {
            id: 1,
            question: "¬øPodr√≠as dictarme tu nombre?",
            response: "Gracias.",
            type: "text",
            field: "nombre" // Campo en formData al que corresponde esta respuesta
        },
        {
            id: 2,
            question: "¬øCu√°l es tu correo electr√≥nico?",
            response: "Perfecto.",
            type: "text",
            field: "correo",
            validate: (email) => CookitoChatbot.isValidEmail(email) ? true : "Por favor, ingresa un correo electr√≥nico v√°lido."
        },
        {
            id: 3,
            question: "¬øCu√°l es tu n√∫mero de celular?",
            response: "Muy bien.",
            type: "text",
            field: "celular",
            validate: (phone) => CookitoChatbot.isValidPhoneNumber(phone) ? true : "Por favor, ingresa un n√∫mero de celular v√°lido (solo d√≠gitos)."
        },
        {
            id: 4,
            question: "¬øQu√© programa de estudio te interesa?",
            response: "Genial.",
            type: "options", // Nuevo tipo de paso
            field: "programa",
            options: [
                "Gastronom√≠a",
                "Pasteler√≠a y Panader√≠a",
                "Bar y Cocteler√≠a",
                "Diplomado en Gesti√≥n de Restaurantes",
                "Otro programa"
            ]
        },
        {
            id: 5,
            question: "¬øQuieres dejar alg√∫n mensaje adicional?",
            response: "‚úÖ ¬°Gracias! Pronto nos pondremos en contacto contigo. üòä",
            type: "text",
            field: "mensaje"
        }
    ],

    init: function() {
        window.addEventListener('load', () => {
            chatAlert.style.display = 'inline';
        });

        chatToggle.addEventListener('click', this.handleChatToggle.bind(this));
        sendButton.addEventListener('click', this.sendMessage.bind(this));
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                this.sendMessage();
            }
        });

        chatOptionsContainer.addEventListener('click', this.handleOptionClick.bind(this));
    },

    handleChatToggle: function() {
        chatBox.style.display = chatBox.style.display === 'flex' ? 'none' : 'flex';

        if (chatBox.style.display === 'flex' && this.step === 0) {
            chatAlert.style.display = 'none';
            this.sendBotMessage("Bienvenido üëã, soy el asistente virtual de *Cooking Gourmet*, me llamo *Cookito*.");
            setTimeout(() => {
                this.displayNextQuestion(); // Inicia el flujo de preguntas
            }, 1000);
        }
    },

    sendBotMessage: function(message) {
        const msg = document.createElement('div');
        msg.className = 'bot-message';
        msg.innerHTML = message.replace(/\*(.*?)\*/g, '<strong>$1</strong>');
        chatBody.appendChild(msg);
        chatBody.scrollTop = chatBody.scrollHeight;
    },

    sendUserMessage: function(message) {
        const userMsg = document.createElement('div');
        userMsg.className = 'user-message';
        userMsg.textContent = message;
        chatBody.appendChild(userMsg);
        chatBody.scrollTop = chatBody.scrollHeight;
    },

    showTypingIndicator: function() {
        const typing = document.createElement('div');
        typing.className = 'bot-message typing-indicator';
        typing.textContent = "Cookito est√° escribiendo...";
        typing.id = "typing-indicator";
        chatBody.appendChild(typing);
        chatBody.scrollTop = chatBody.scrollHeight;
        this.isTyping = true;
    },

    removeTypingIndicator: function() {
        const typingIndicator = document.getElementById("typing-indicator");
        if (typingIndicator) {
            typingIndicator.remove();
        }
        this.isTyping = false;
    },

    // Muestra la pregunta actual definida por 'this.step'
    displayNextQuestion: function() {
        // Verifica si hemos llegado al final de las preguntas
        if (this.step >= this.chatFlow.length) {
            // Ya no hay m√°s preguntas, el flujo deber√≠a haber terminado o estar en estado de env√≠o.
            // Esto es una salvaguarda.
            console.log("Fin del flujo de preguntas o ya en estado de finalizaci√≥n.");
            return;
        }

        const currentQuestionData = this.chatFlow[this.step];

        this.showTypingIndicator();
        this.disableUserInput(true);
        this.clearOptions(); // Asegura que no queden opciones viejas

        setTimeout(() => {
            this.removeTypingIndicator();
            this.sendBotMessage(currentQuestionData.question);

            if (currentQuestionData.type === "options" && currentQuestionData.options) {
                this.renderOptions(currentQuestionData.options);
                // Cuando hay opciones, el input de texto se oculta autom√°ticamente
                // y el usuario debe elegir una opci√≥n.
            } else {
                this.disableUserInput(false); // Habilita el input si es una pregunta de texto
                userInput.focus();
            }
        }, 1500);
    },

    sendMessage: function(messageFromOption = null) {
        if (this.isTyping) return;

        let message;
        if (messageFromOption !== null) {
            message = messageFromOption;
            // clearOptions se llama m√°s adelante o en renderOptions/displayNextQuestion
            // para manejar la visibilidad del input/botones.
        } else {
            message = userInput.value.trim();
        }

        if (!message) return;

        this.sendUserMessage(message);
        userInput.value = '';

        // El paso actual (this.step) es la pregunta que el usuario acaba de responder
        const answeredQuestionIndex = this.step;
        const answeredQuestionData = this.chatFlow[answeredQuestionIndex];

        // Validar la entrada del usuario si el paso actual lo requer√≠a
        if (answeredQuestionData && answeredQuestionData.validate) {
            const validationResult = answeredQuestionData.validate(message);
            if (validationResult !== true) {
                this.sendBotMessage(validationResult); // Muestra el error de validaci√≥n
                this.disableUserInput(false); // Re-habilita para que el usuario pueda corregir
                userInput.focus();
                return; // No avanzamos el step
            }
        }

        // Almacena el dato recolectado
        if (answeredQuestionData && answeredQuestionData.field) {
            this.formData[answeredQuestionData.field] = message;
        }

        // Responde al mensaje del usuario (si el paso actual tiene una respuesta definida)
        if (answeredQuestionData && answeredQuestionData.response) {
            this.sendBotMessage(answeredQuestionData.response);
        }

        // Avanza al siguiente paso despu√©s de procesar la respuesta
        this.step++;

        // Si ya no quedan m√°s preguntas despu√©s de esta respuesta
        if (this.step >= this.chatFlow.length) {
            this.disableUserInput(true); // Deshabilita el input al finalizar
            setTimeout(() => {
                this.enviarFormularioAsincrono(); // Env√≠a el formulario
            }, 1000);
        } else {
            // Si hay m√°s preguntas, muestra la siguiente
            setTimeout(() => {
                this.displayNextQuestion();
            }, 500);
        }
    },

    // --- Funciones de Opciones/Botones ---
    renderOptions: function(options) {
        chatOptionsContainer.innerHTML = ''; // Limpia cualquier opci√≥n previa
        options.forEach(optionText => {
            const button = document.createElement('button');
            button.className = 'chat-option-button';
            button.textContent = optionText;
            button.dataset.value = optionText; // Para capturar el valor
            chatOptionsContainer.appendChild(button);
        });
        chatOptionsContainer.style.display = 'flex'; // Muestra el contenedor de opciones
        userInput.style.display = 'none'; // Oculta el input de texto
        sendButton.style.display = 'none'; // Oculta el bot√≥n de env√≠o si hay opciones
    },

    clearOptions: function() {
        chatOptionsContainer.innerHTML = '';
        chatOptionsContainer.style.display = 'none';
        userInput.style.display = 'block'; // Muestra el input de texto
        sendButton.style.display = 'block'; // Muestra el bot√≥n de env√≠o
    },

    handleOptionClick: function(event) {
        if (event.target.classList.contains('chat-option-button')) {
            const selectedValue = event.target.dataset.value;
            this.clearOptions(); // Oculta las opciones una vez seleccionada una
            this.sendMessage(selectedValue); // Env√≠a la opci√≥n como un mensaje del usuario
        }
    },

    // --- Funciones de Utilidad ---
    disableUserInput: function(disable) {
        userInput.disabled = disable;
        sendButton.disabled = disable;
        if (disable) {
            userInput.style.cursor = 'not-allowed';
            sendButton.style.cursor = 'not-allowed';
        } else {
            userInput.style.cursor = 'text';
            sendButton.style.cursor = 'pointer';
        }
    },

    // --- Funciones de Validaci√≥n ---
    isValidEmail: function(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    },

    isValidPhoneNumber: function(phone) {
        const re = /^\d+$/; // Solo d√≠gitos
        // Asumiendo n√∫meros de 9 d√≠gitos para Per√∫
        if (phone.length !== 9) return false;
        // Podr√≠as a√±adir validaci√≥n de prefijo, e.g., que empiece con 9 para celulares
        if (!phone.startsWith('9')) return false;
        return re.test(phone);
    },

    // --- Env√≠o del Formulario de forma As√≠ncrona ---
    enviarFormularioAsincrono: async function() {
        const form = document.getElementById('cuquito-form');
        const url = form.action;

        if (!url) {
            this.sendBotMessage("Error: La URL de env√≠o del formulario no est√° definida. Por favor, contacta a soporte.");
            console.error("El formulario 'cuquito-form' no tiene una URL de acci√≥n (action attribute).");
            return;
        }

        // Llenar el formulario oculto con los datos recolectados
        // Aseg√∫rate de que los 'name' en tu HTML coincidan con los 'field' en chatFlow
        form.elements["Nombre"].value = this.formData.nombre || '';
        form.elements["Correo"].value = this.formData.correo || '';
        form.elements["Celular"].value = this.formData.celular || '';
        form.elements["Programa de Estudio"].value = this.formData.programa || '';
        form.elements["Mensaje"].value = this.formData.mensaje || '';

        try {
            const formDataToSend = new FormData(form);

            const response = await fetch(url, {
                method: 'POST',
                body: formDataToSend
            });

            if (!response.ok) {
                // Aqu√≠ puedes a√±adir un manejo m√°s espec√≠fico si FormSubmit devuelve c√≥digos de error
                throw new Error(`Error HTTP! Estado: ${response.status}`);
            }

            // Opcional: Si FormSubmit te da una respuesta √∫til, la puedes leer aqu√≠.
            // const result = await response.text();
            // console.log("Formulario enviado con √©xito:", result);

            // Deshabilita la entrada de usuario despu√©s del env√≠o exitoso
            this.disableUserInput(true);
            // Podr√≠as mostrar un mensaje de √©xito adicional aqu√≠ si lo deseas
            // this.sendBotMessage("¬°Datos enviados! Te contactaremos pronto.");

        } catch (error) {
            console.error('Error al enviar el formulario:', error);
            this.sendBotMessage("¬°Ups! Hubo un problema al enviar tu informaci√≥n. Por favor, intenta de nuevo m√°s tarde o cont√°ctanos directamente.");
            // Si hay un error, permite al usuario reintentar
            this.disableUserInput(false);
        }
    }
};

// Inicializa el chatbot cuando el DOM est√© completamente cargado
document.addEventListener('DOMContentLoaded', () => {
    CookitoChatbot.init();
});
</script>





    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>